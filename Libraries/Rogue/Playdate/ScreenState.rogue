module Playdate

class ScreenState
  PROPERTIES
    _next_state : ScreenState

  METHODS
    method after_draw
      noAction

    method change_state( state:ScreenState )
      _next_state = state
      Screen.next_state_requested = true

    method next_state
      Screen.next_state_requested = true

    method on_draw
      noAction

    method queue_state( state:ScreenState )
      local cur = this
      while (cur._next_state) cur .= _next_state
      cur._next_state = state
endClass

